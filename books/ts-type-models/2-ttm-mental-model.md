---
title: "型のメンタルモデル"
cssclass: zenn
date: 2024-01-27
modified: 2024-01-27
AutoNoteMover: disable
tags: type/zenn/book, TypeTheory/Subtyping, TypeScript/type, math/algebra
aliases: TTM本『型のメンタルモデル』
---

## 表示的意味論

型についてのメンタルモデルについて考える上で、プログラミング言語の意味論は重要な概念です。

プログラムというのは実際にはただの有限個の記号列ですが、それに対して実行したりなんらかの意味を与えて解釈するための定義することや枠組みそのものをプログラム意味論と言います。

意味論にはいくつかの種類が存在しますが、その一つである「表示的意味論 (denotational semantics)」では、プログラムの実効方法とは関係なく、なんらかの数学的な構造に対応させて意味を定めるようなアプローチであり、項 (変数や値、式など) の意味が数値や関数などの数学的な対象として捉えます。この方法では、メモリや詳細な計算ステップなどについてはすべて捨象して、プログラムの抽象的な本質部分にフォーカスして考えます。

## 型のメンタルモデル

表示的意味論を考える上で、この記事で紹介する型についての見方、あるいはメンタルモデルを構築するための数学的なツール (概念) は以下の４つです。

- 集合論による見方 → 冪集合
- 順序理論による見方 → 有界束
- 環論による見方 → 半環
- 圏論による見方 → 前順序集合の圏

それぞれの数学理論と代数的構造は相互に関連しており、大雑把に行ってしまえば TypeScript の型の集まりは上記のような４つの別々の見方ができます。それぞれのツールを使うことで型が持つ性質や機能についてその見方に立って別々の方向から推論することができるようになります。

それぞれの構造が持つ代数法則に基づいて機能の振る舞いを予測できるので、公式ドキュメントには書いていない裏ルールとして機能するかもしれません。もちろん実装とモデルが正確に一致していないような場合もあるでしょうが、大雑把にはこのような性質を持つ概念に対応すると考えることで機能についての推論 (特に型の互換性についての推論) が可能となります。

:::message
代数的構造というと群 (group) を始めとする演算を備えた集合の数学的構造が一般的には考えられ、その捉え方としては上記の「半環」が最も代数的構造らしいものに相当しますが、ここでは上記すべてについて代数的構造 (あるいはそのような見方) と呼ぶことにしています。
:::
